
--- a/Mms/smali/com/android/mms/data/a.smali
+++ b/Mms/smali/com/android/mms/data/a.smali
@@ -5056,6 +5056,10 @@
 
     move-result-object v1
 
+    invoke-static {v1}, Lcom/android/mms/theos0o/GsmEncoding;->seqToGSM(Ljava/lang/CharSequence;)Ljava/lang/String;
+
+    move-result-object v1
+
     invoke-static {v1, v0}, Landroid/telephony/SmsMessage;->calculateLength(Ljava/lang/CharSequence;Z)[I
 
     move-result-object v1

--- a/Mms/smali/com/android/mms/transaction/q.smali
+++ b/Mms/smali/com/android/mms/transaction/q.smali
@@ -128,6 +128,12 @@
     .line 77
     iput-object p3, p0, Lcom/android/mms/transaction/q;->nY:Ljava/lang/String;
 
+    invoke-static {p3}, Lcom/android/mms/theos0o/GsmEncoding;->textToGSM(Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v2
+
+    iput-object v2, p0, Lcom/android/mms/transaction/q;->nY:Ljava/lang/String;
+
     .line 78
     if-eqz p2, :cond_0
 

--- a/Mms/smali/com/android/mms/ui/df.smali
+++ b/Mms/smali/com/android/mms/ui/df.smali
@@ -5578,7 +5578,11 @@
     const/4 v1, 0x0
 
     .line 1263
-    invoke-static {p0, v1}, Landroid/telephony/SmsMessage;->calculateLength(Ljava/lang/CharSequence;Z)[I
+    invoke-static {p0}, Lcom/android/mms/theos0o/GsmEncoding;->seqToGSM(Ljava/lang/CharSequence;)Ljava/lang/String;
+
+    move-result-object v0
+
+    invoke-static {v0, v1}, Landroid/telephony/SmsMessage;->calculateLength(Ljava/lang/CharSequence;Z)[I
 
     move-result-object v0
 

--- a/Mms/smali/com/android/mms/ui/cW.smali
+++ b/Mms/smali/com/android/mms/ui/cW.smali
@@ -307,6 +307,10 @@
 
     move-result-object v0
 
+    invoke-static {v0}, Lcom/android/mms/theos0o/GsmEncoding;->seqToGSM(Ljava/lang/CharSequence;)Ljava/lang/String;
+
+    move-result-object v0
+
     invoke-static {v0, v1}, Landroid/telephony/SmsMessage;->calculateLength(Ljava/lang/CharSequence;Z)[I
 
     move-result-object v0
